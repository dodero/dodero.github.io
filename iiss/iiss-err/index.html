
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Apuntes de Implementación e Implantación de Sistemas Software – Grado en Ingeniería Informática">
      
      
      
        <meta name="author" content="Juan Manuel Dodero">
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.7">
    
    
      
        <title>Calidad - Implementación e Implantación de Sistemas Software</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.39b8e14a.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#calidad" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Implementación e Implantación de Sistemas Software" class="md-header-nav__button md-logo" aria-label="Implementación e Implantación de Sistemas Software">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Implementación e Implantación de Sistemas Software
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Calidad
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/dodero/gii-dss-iiss/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Implementación e Implantación de Sistemas Software" class="md-nav__button md-logo" aria-label="Implementación e Implantación de Sistemas Software">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Implementación e Implantación de Sistemas Software
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/dodero/gii-dss-iiss/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Inicio
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
      
      <label class="md-nav__link" for="nav-2">
        Asignatura
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Asignatura" data-md-level="1">
        <label class="md-nav__title" for="nav-2">
          <span class="md-nav__icon md-icon"></span>
          Asignatura
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-pres/" class="md-nav__link">
        Presentación
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../bibliografia/" class="md-nav__link">
        Bibliografía
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../iiss-temas/" class="md-nav__link">
        Temario
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
      
      <label class="md-nav__link" for="nav-4">
        I. Objetos
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="I. Objetos" data-md-level="1">
        <label class="md-nav__title" for="nav-4">
          <span class="md-nav__icon md-icon"></span>
          I. Objetos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-oop-1/" class="md-nav__link">
        Principios
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-oop-2/" class="md-nav__link">
        Delegación
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-oop-3/" class="md-nav__link">
        Inyección
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-oop-4/" class="md-nav__link">
        Duplicación
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Calidad
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Calidad
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tratamiento-de-errores" class="md-nav__link">
    Tratamiento de errores
  </a>
  
    <nav class="md-nav" aria-label="Tratamiento de errores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codigos-de-error" class="md-nav__link">
    Códigos de error
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#excepciones" class="md-nav__link">
    Excepciones
  </a>
  
    <nav class="md-nav" aria-label="Excepciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#separar-la-funcion-y-el-tratamiento-de-errores" class="md-nav__link">
    Separar la función y el tratamiento de errores
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#excepciones-en-java" class="md-nav__link">
    Excepciones en Java
  </a>
  
    <nav class="md-nav" aria-label="Excepciones en Java">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tipos-de-excepciones-en-java" class="md-nav__link">
    Tipos de excepciones en Java
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tratamiento-de-excepciones-en-java" class="md-nav__link">
    Tratamiento de excepciones en Java
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recomendaciones" class="md-nav__link">
    Recomendaciones
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformacion-de-excepciones" class="md-nav__link">
    Transformación de excepciones
  </a>
  
    <nav class="md-nav" aria-label="Transformación de excepciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transformar-en-unchecked" class="md-nav__link">
    Transformar en unchecked
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#excepciones-encapsuladas" class="md-nav__link">
    Excepciones encapsuladas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#las-excepciones-son-excepcionales" class="md-nav__link">
    Las excepciones son excepcionales
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uso-de-null" class="md-nav__link">
    Uso de null
  </a>
  
    <nav class="md-nav" aria-label="Uso de null">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#principio-general-no-devolver-null" class="md-nav__link">
    Principio general: no devolver null
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-devolver-null" class="md-nav__link">
    No devolver null
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-pasar-valores-null" class="md-nav__link">
    No pasar valores null
  </a>
  
    <nav class="md-nav" aria-label="No pasar valores null">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternativa-con-aserciones" class="md-nav__link">
    Alternativa con aserciones
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionals" class="md-nav__link">
    Optionals
  </a>
  
    <nav class="md-nav" aria-label="Optionals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scala-option" class="md-nav__link">
    Scala Option
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#java-8-optional" class="md-nav__link">
    Java 8 Optional
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fronteras" class="md-nav__link">
    Fronteras
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../iiss-aop/" class="md-nav__link">
        II. Aspectos
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../iiss-dbc/" class="md-nav__link">
        III. Contratos
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
      
      <label class="md-nav__link" for="nav-7">
        IV. Funciones
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="IV. Funciones" data-md-level="1">
        <label class="md-nav__title" for="nav-7">
          <span class="md-nav__icon md-icon"></span>
          IV. Funciones
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-fp-1/" class="md-nav__link">
        Interfaces funcionales
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-fp-2/" class="md-nav__link">
        Lambdas
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-fp-3/" class="md-nav__link">
        Mixins
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" >
      
      <label class="md-nav__link" for="nav-8">
        V. Eventos
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="V. Eventos" data-md-level="1">
        <label class="md-nav__title" for="nav-8">
          <span class="md-nav__icon md-icon"></span>
          V. Eventos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-evp-1/" class="md-nav__link">
        Listeners
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-evp-2/" class="md-nav__link">
        Asíncronas
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../iiss-evp-3/" class="md-nav__link">
        Eventos
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tratamiento-de-errores" class="md-nav__link">
    Tratamiento de errores
  </a>
  
    <nav class="md-nav" aria-label="Tratamiento de errores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codigos-de-error" class="md-nav__link">
    Códigos de error
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#excepciones" class="md-nav__link">
    Excepciones
  </a>
  
    <nav class="md-nav" aria-label="Excepciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#separar-la-funcion-y-el-tratamiento-de-errores" class="md-nav__link">
    Separar la función y el tratamiento de errores
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#excepciones-en-java" class="md-nav__link">
    Excepciones en Java
  </a>
  
    <nav class="md-nav" aria-label="Excepciones en Java">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tipos-de-excepciones-en-java" class="md-nav__link">
    Tipos de excepciones en Java
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tratamiento-de-excepciones-en-java" class="md-nav__link">
    Tratamiento de excepciones en Java
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recomendaciones" class="md-nav__link">
    Recomendaciones
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transformacion-de-excepciones" class="md-nav__link">
    Transformación de excepciones
  </a>
  
    <nav class="md-nav" aria-label="Transformación de excepciones">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transformar-en-unchecked" class="md-nav__link">
    Transformar en unchecked
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#excepciones-encapsuladas" class="md-nav__link">
    Excepciones encapsuladas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#las-excepciones-son-excepcionales" class="md-nav__link">
    Las excepciones son excepcionales
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uso-de-null" class="md-nav__link">
    Uso de null
  </a>
  
    <nav class="md-nav" aria-label="Uso de null">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#principio-general-no-devolver-null" class="md-nav__link">
    Principio general: no devolver null
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-devolver-null" class="md-nav__link">
    No devolver null
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-pasar-valores-null" class="md-nav__link">
    No pasar valores null
  </a>
  
    <nav class="md-nav" aria-label="No pasar valores null">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternativa-con-aserciones" class="md-nav__link">
    Alternativa con aserciones
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optionals" class="md-nav__link">
    Optionals
  </a>
  
    <nav class="md-nav" aria-label="Optionals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scala-option" class="md-nav__link">
    Scala Option
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#java-8-optional" class="md-nav__link">
    Java 8 Optional
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fronteras" class="md-nav__link">
    Fronteras
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/dodero/gii-dss-iiss/edit/master/apuntes/construccion-sw/docs/iiss-err.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h0>CALIDAD</h0>
<h1 id="calidad"><span style="color:blue;">Calidad</span><a class="headerlink" href="#calidad" title="Permanent link">&para;</a></h1>
<p><a id="errores"></a></p>
<h2 id="tratamiento-de-errores">Tratamiento de errores<a class="headerlink" href="#tratamiento-de-errores" title="Permanent link">&para;</a></h2>
<h3 id="codigos-de-error">Códigos de error<a class="headerlink" href="#codigos-de-error" title="Permanent link">&para;</a></h3>
<p>Un ejemplo habitual de tratamiento de errores con <strong>códigos de error</strong> en un lenguaje como C:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="p">(</span><span class="n">deletePage</span><span class="p">(</span><span class="n">page</span><span class="p">)</span> <span class="o">==</span> <span class="n">E_OK</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">registry</span><span class="p">.</span><span class="na">deleteReference</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">)</span> <span class="o">==</span> <span class="n">E_OK</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">configKeys</span><span class="p">.</span><span class="na">deleteKey</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">.</span><span class="na">makeKey</span><span class="p">())</span> <span class="o">==</span> <span class="n">E_OK</span><span class="p">){</span>
      <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&quot;page deleted&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&quot;configKey not deleted&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&quot;deleteReference from registry failed&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&quot;delete failed&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">E_ERROR</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Con esta técnica creamos <em>imanes de dependencias</em>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Error</span> <span class="p">{</span>
  <span class="n">OK</span><span class="p">,</span>
  <span class="n">INVALID</span><span class="p">,</span>
  <span class="n">NO_SUCH</span><span class="p">,</span>
  <span class="n">LOCKED</span><span class="p">,</span>
  <span class="n">OUT_OF_RESOURCES</span><span class="p">,</span>
  <span class="n">WAITING_FOR_EVENT</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition failure mala práctica">
<p class="admonition-title">Failure</p>
<p>Los programadores intentan evitar añadir nuevos motivos de error, porque eso significa tener que volver a compilar y desplegar todo el código.</p>
</div>
<h2 id="excepciones">Excepciones<a class="headerlink" href="#excepciones" title="Permanent link">&para;</a></h2>
<p>Muchos lenguajes usan <strong>excepciones</strong> en lugar de códigos de error:</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span> <span class="p">{</span>
<span class="hll">  <span class="n">deletePage</span><span class="p">(</span><span class="n">page</span><span class="p">);</span>
</span><span class="hll">  <span class="n">registry</span><span class="p">.</span><span class="na">deleteReference</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">);</span>
</span><span class="hll">  <span class="n">configKeys</span><span class="p">.</span><span class="na">deleteKey</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">.</span><span class="na">makeKey</span><span class="p">());</span>
</span><span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>
<p>¿No queda más claro?</p>
<div class="admonition success">
<p class="admonition-title">Ventaja</p>
<p>Las nuevas excepciones son derivadas de una clase base <code>Exception</code>, lo que facilita la definición de nuevos motivos de error.</p>
</div>
<div class="admonition question">
<p class="admonition-title"><span style="color:red;">¿Dónde se produce el error?</span></p>
<p>Si se eleva una excepción en el ejemplo anterior, ¿en cuál de las instrucciones del bloque <code>try</code> se ha producido?</p>
</div>
<h3 id="separar-la-funcion-y-el-tratamiento-de-errores">Separar la función y el tratamiento de errores<a class="headerlink" href="#separar-la-funcion-y-el-tratamiento-de-errores" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Page</span> <span class="n">page</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="n">deletePageAndAllReferences</span><span class="p">(</span><span class="n">page</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">logError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">deletePageAndAllReferences</span><span class="p">(</span><span class="n">Page</span> <span class="n">page</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="p">{</span>
  <span class="n">deletePage</span><span class="p">(</span><span class="n">page</span><span class="p">);</span>
  <span class="n">registry</span><span class="p">.</span><span class="na">deleteReference</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">);</span>
  <span class="n">configKeys</span><span class="p">.</span><span class="na">deleteKey</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="na">name</span><span class="p">.</span><span class="na">makeKey</span><span class="p">());</span>
<span class="p">}</span>

<span class="kd">private</span> <span class="kt">void</span> <span class="nf">logError</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>
<p>¿No queda más fácil de comprender, modificar y depurar?</p>
<h3 id="excepciones-en-java">Excepciones en Java<a class="headerlink" href="#excepciones-en-java" title="Permanent link">&para;</a></h3>
<h4 id="tipos-de-excepciones-en-java">Tipos de excepciones en Java<a class="headerlink" href="#tipos-de-excepciones-en-java" title="Permanent link">&para;</a></h4>
<dl>
<dt><strong>Checked</strong></dt>
<dd>Instancias de clases derivadas de <code>java.lang.Throwable</code> (menos <code>RuntimeException</code>). Deben declararse en el método mediante <code>throws</code> y obligan al llamador a tratar la excepción.</dd>
<dt><strong>Unchecked</strong></dt>
<dd>Instancias de clases derivadas de <code>java.lang.RuntimeException</code>. No se declaran en el método y no obligan al llamador a tratar la excepción.</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">¿Qué implica elevar una excepción <code>e</code> en Java?</p>
<ol>
<li>Deshacer (<em>roll back</em>) la llamada a un método...</li>
<li>...hasta que se encuentre un bloque catch para el tipo de <code>e</code> y...</li>
<li>si no se encuentra, la excepción es capturada por la JVM, que detiene el programa</li>
</ol>
</div>
<h4 id="tratamiento-de-excepciones-en-java">Tratamiento de excepciones en Java<a class="headerlink" href="#tratamiento-de-excepciones-en-java" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>  <span class="k">try</span> <span class="p">{</span>
      <span class="cm">/* guarded region that can send</span>
<span class="cm">        IOException or Exception */</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">(</span><span class="n">IOException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="cm">/* decide what to do when an IOException</span>
<span class="cm">        or a sub-class of IOException occurs */</span>
  <span class="p">}</span>
  <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Treats any other exceptions</span>
  <span class="p">}</span>
  <span class="k">finally</span> <span class="p">{</span>
      <span class="c1">// in all cases execute this</span>
  <span class="p">}</span>
</code></pre></div>
<h3 id="recomendaciones">Recomendaciones<a class="headerlink" href="#recomendaciones" title="Permanent link">&para;</a></h3>
<p>Incluir el <strong>contexto</strong> de la ejecución:</p>
<ul>
<li>Incluir información suficiente con cada excepción para determinar el motivo y la ubicación de un error</li>
<li>No basta con el <em>stack trace</em></li>
<li>Escribir mensajes informativos: operación fallida y tipo de fallo</li>
</ul>
<p>Los beneficios de las excepciones <em>checked</em> en Java son mínimos: <a href="https://testing.googleblog.com/2009/09/checked-exceptions-i-love-you-but-you.html">¿por qué</a>. Se recomienda usar solamente excepciones <strong>unchecked</strong>.</p>
<ul>
<li>C#, C++, Python o Ruby no ofrecen excepciones <em>checked</em>.</li>
<li>Scala no usa excepciones <em>checked</em> como Java: <a href="https://madusudanan.com/blog/scala-tutorials-part-24-exception-handling/#Intro">Scala exception handling</a></li>
<li>Se paga el precio de violar el principio OCP (<em>Open-Closed Principle</em>): si lanzamos una excepción <em>checked</em> desde un método y el <code>catch</code> está tres niveles por encima, hay que declarar la excepción en la signatura de todos los métodos que van entre medias. Esto significa que un cambio en un nivel bajo del software puede forzar cambios en niveles altos.</li>
</ul>
<h3 id="transformacion-de-excepciones">Transformación de excepciones<a class="headerlink" href="#transformacion-de-excepciones" title="Permanent link">&para;</a></h3>
<h4 id="transformar-en-unchecked">Transformar en unchecked<a class="headerlink" href="#transformar-en-unchecked" title="Permanent link">&para;</a></h4>
<p>Muchas APIs de Java lanzan excepciones checked cuando deberían ser unchecked</p>
<p><strong>Ejemplo</strong>: Al ejecutar una consulta mediante <code>executeQuery</code> en el API de JDBC se lanza una excepción <code>java.sql.SQLException</code> (de tipo checked) si la SQL es errónea.</p>
<p><strong>Solución</strong>:</p>
<p>Transformar las excepciones checked en unchecked:</p>
<div class="highlight"><pre><span></span><code>  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Codigo que genera la excepcion checked</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Unchecked exception&quot;</span><span class="p">,</span> <span class="n">ex</span><span class="p">)</span>
  <span class="p">}</span>
</code></pre></div>
<h4 id="excepciones-encapsuladas">Excepciones encapsuladas<a class="headerlink" href="#excepciones-encapsuladas" title="Permanent link">&para;</a></h4>
<p>Criticar la siguiente implementación:</p>
<div class="highlight"><pre><span></span><code>  <span class="n">ACMEPort</span> <span class="n">port</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ACMEPort</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="n">port</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">DeviceResponseException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">reportPortError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&quot;Device response exception&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">ATM1212UnlockedException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">reportPortError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&quot;Unlock exception&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">GMXError</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">reportPortError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&quot;Device response exception&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
    <span class="p">...</span>
  <span class="p">}</span>
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Excesiva duplicación de código</p>
<p>La llamada a <code>reportPortError()</code> se repite mucho.
<span style="color:red;">¿Cómo evitar la excesiva duplicación?</span></p>
</div>
<details class="success"><summary>Solución: Excepción encapsulada</summary><div class="highlight"><pre><span></span><code><span class="n">LocalPort</span> <span class="n">port</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalPort</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="n">port</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">PortDeviceFailure</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">reportPortError</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
  <span class="n">logger</span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(),</span> <span class="n">e</span><span class="p">);</span>
<span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LocalPort</span> <span class="p">{</span>
  <span class="kd">private</span> <span class="n">ACMEPort</span> <span class="n">innerPort</span><span class="p">;</span>
  <span class="kd">public</span> <span class="nf">LocalPort</span><span class="p">(</span><span class="kt">int</span> <span class="n">portNumber</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">innerPort</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ACMEPort</span><span class="p">(</span><span class="n">portNumber</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">open</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">PortDeviceFailure</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="n">innerPort</span><span class="p">.</span><span class="na">open</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">DeviceResponseException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">PortDeviceFailure</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">ATM1212UnlockedException</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">PortDeviceFailure</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">GMXError</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="n">PortDeviceFailure</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
</details>
<ul>
<li>La encapsulación de excepciones es recomendable cuando se usa un API de terceros, para minimizar las dependencias con respecto al API elegido.</li>
<li>También facilitan la implementación de <em>mocks</em> del componente que proporciona el API para construir pruebas.</li>
</ul>
<h3 id="las-excepciones-son-excepcionales">Las excepciones son excepcionales<a class="headerlink" href="#las-excepciones-son-excepcionales" title="Permanent link">&para;</a></h3>
<p><strong>Recomendación de uso</strong>: Usar excepciones para problemas excepcionales (eventos inesperados)</p>
<div class="admonition example">
<p class="admonition-title">Excepciones tras la apertura de ficheros</p>
<p><span style="color:red;">¿Usar excepciones cuando se intenta abrir un fichero para leer y el fichero no existe?</span></p>
</div>
<p>Depende de si el fichero debe estar ahí</p>
<ul>
<li>Caso en que se debe lanzar una excepción:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">open_passwd</span><span class="p">()</span> <span class="kd">throws</span> <span class="n">FileNotFoundException</span> <span class="p">{</span>
  <span class="c1">// This may throw FileNotFoundException...</span>
  <span class="n">ipstream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="p">(</span><span class="s">&quot;/etc/passwd&quot;</span><span class="p">);</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Caso en que no se debe lanzar una excepción:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">open_user_file</span><span class="p">(</span><span class="n">String</span> <span class="n">name</span><span class="p">)</span>
    <span class="kd">throws</span> <span class="n">FileNotFoundException</span> <span class="p">{</span>
  <span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">f</span><span class="p">.</span><span class="na">exists</span><span class="p">())</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="n">ipstream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><a id="null"></a></p>
<h2 id="uso-de-null">Uso de null<a class="headerlink" href="#uso-de-null" title="Permanent link">&para;</a></h2>
<p>Obtener un <em>null</em> cuando no se espera puede ser un quebradero de cabeza para el tratamiento de errores</p>
<h3 id="principio-general-no-devolver-null">Principio general: no devolver null<a class="headerlink" href="#principio-general-no-devolver-null" title="Permanent link">&para;</a></h3>
<p>Este código puede parecer inofensivo, pero es maligno:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">registerItem</span><span class="p">(</span><span class="n">Item</span> <span class="n">item</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">item</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ItemRegistry</span> <span class="n">registry</span> <span class="o">=</span> <span class="n">peristentStore</span><span class="p">.</span><span class="na">getItemRegistry</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">registry</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">Item</span> <span class="n">existing</span> <span class="o">=</span> <span class="n">registry</span><span class="p">.</span><span class="na">getItem</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="na">getID</span><span class="p">());</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">existing</span><span class="p">.</span><span class="na">getBillingPeriod</span><span class="p">().</span><span class="na">hasRetailOwner</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">existing</span><span class="p">.</span><span class="na">register</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>¿Qué pasa si <code>persistentStore</code> es null?</p>
<ul>
<li>Peligro de <code>NullPointerException</code></li>
<li>¿Se nos ha olvidado añadir un <code>if null</code>?</li>
<li>El problema no es que se haya olvidado uno, sino que hay demasiados</li>
<li>En su lugar, elevar una excepción o devolver un objeto <em>especial</em></li>
</ul>
<h3 id="no-devolver-null">No devolver null<a class="headerlink" href="#no-devolver-null" title="Permanent link">&para;</a></h3>
<p>Evitar:</p>
<div class="highlight"><pre><span></span><code><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="n">getEmployees</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="n">employees</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span><span class="p">(</span><span class="n">Employee</span> <span class="n">e</span> <span class="p">:</span> <span class="n">employees</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">totalPay</span> <span class="o">+=</span> <span class="n">e</span><span class="p">.</span><span class="na">getPay</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Mejor así:</p>
<div class="highlight"><pre><span></span><code><span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="n">getEmployees</span><span class="p">();</span>
<span class="k">for</span><span class="p">(</span><span class="n">Employee</span> <span class="n">e</span> <span class="p">:</span> <span class="n">employees</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">totalPay</span> <span class="o">+=</span> <span class="n">e</span><span class="p">.</span><span class="na">getPay</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">getEmployees</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span> <span class="cm">/* there are no employees */</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">Collections</span><span class="p">.</span><span class="na">emptyList</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="no-pasar-valores-null">No pasar valores null<a class="headerlink" href="#no-pasar-valores-null" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MetricsCalculator</span>
<span class="p">{</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">xProjection</span><span class="p">(</span><span class="n">Point</span> <span class="n">p1</span><span class="p">,</span> <span class="n">Point</span> <span class="n">p2</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">p2</span><span class="p">.</span><span class="na">x</span> <span class="o">-</span> <span class="n">p1</span><span class="p">.</span><span class="na">x</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p><span style="color:red;">¿Qué sucede si llamamos a <code>xProjection()</code> así...?</span></p>
<div class="highlight"><pre><span></span><code>  <span class="n">calculator</span><span class="p">.</span><span class="na">xProjection</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="k">new</span> <span class="n">Point</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">))</span>
</code></pre></div>
<p>Devolver null es malo, pero ¡pasar un valor null es peor!</p>
<p><span style="color:red;">¿Es mejor así...?</span></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MetricsCalculator</span>
<span class="p">{</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">xProjection</span><span class="p">(</span><span class="n">Point</span> <span class="n">p1</span><span class="p">,</span> <span class="n">Point</span> <span class="n">p2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">p1</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">p2</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="n">InvalidArgumentException</span><span class="p">(</span>
               <span class="s">&quot;Invalid argument for MetricsCalculator.xProjection&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">p2</span><span class="p">.</span><span class="na">x</span> <span class="o">-</span> <span class="n">p1</span><span class="p">.</span><span class="na">x</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>¿Qué curso de acción tomar ante un <code>InvalidArgumentException</code>? ¿Hay alguno?</p>
<h4 id="alternativa-con-aserciones">Alternativa con aserciones<a class="headerlink" href="#alternativa-con-aserciones" title="Permanent link">&para;</a></h4>
<div class="admonition tip">
<p class="admonition-title">Solo para JDK <span><span class="MathJax_Preview">\geq</span><script type="math/tex">\geq</script></span> 5.0</p>
</div>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MetricsCalculator</span>
<span class="p">{</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">xProjection</span><span class="p">(</span><span class="n">Point</span> <span class="n">p1</span><span class="p">,</span> <span class="n">Point</span> <span class="n">p2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">assert</span> <span class="n">p1</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">:</span> <span class="s">&quot;p1 should not be null&quot;</span><span class="p">;</span>
    <span class="k">assert</span> <span class="n">p2</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">:</span> <span class="s">&quot;p2 should not be null&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">p2</span><span class="p">.</span><span class="na">x</span> <span class="o">-</span> <span class="n">p1</span><span class="p">.</span><span class="na">x</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.5</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>El uso de <code>assert</code> es una buena forma de documentar, pero no resuelve el problema.</p>
<h3 id="optionals">Optionals<a class="headerlink" href="#optionals" title="Permanent link">&para;</a></h3>
<ul>
<li>En la mayoría de lenguajes no hay forma satisfactoria de tratar con <em>nulls</em> pasados como argumento accidentalmente.</li>
<li>Para eso están los <em>options</em> u <em>optionals</em>, disponibles actualmente en muchos lenguajes como:<ul>
<li><a href="https://www.tutorialspoint.com/scala/scala_options.htm">Scala <code>Option</code></a></li>
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html">Java 8</a> <code class="highlight"><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Optional</span></code></li>
<li>C++17 <code class="highlight"><span class="n">std</span><span class="o">::</span><span class="n">optional</span></code></li>
</ul>
</li>
<li><a href="https://github.com/Microsoft/TypeScript/wiki/Coding-guidelines#null-and-undefined">TypeScript recomienda usar <code>undefined</code></a> (algo que no se ha inicializado) en lugar de <code>null</code> (algo que no está disponible)</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Lecturas recomendadas</p>
<p>Leer <a href="https://www.tutorialspoint.com/scala/scala_options.htm">Tutorial de <code class="highlight"><span class="nc">Option</span></code></a> en Scala</p>
</div>
<h4 id="scala-option">Scala <code>Option</code><a class="headerlink" href="#scala-option" title="Permanent link">&para;</a></h4>
<p>En Scala, <code class="highlight"><span class="nc">Option</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span></code> es un contenedor de un valor opcional de tipo T.</p>
<ul>
<li>Si el valor de tipo T está presente, <code class="highlight"><span class="nc">Option</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span></code> es una intancia de <code class="highlight"><span class="nc">Some</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span></code> que contiene el valor presente de tipo T.</li>
<li>Si el valor está ausente, <code class="highlight"><span class="nc">Option</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span></code> es el objeto <code class="highlight"><span class="nc">None</span></code>.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Valores vacíos en Scala</p>
<p>Conocer las diferencias entre <a href="https://www.geeksforgeeks.org/scala-null-null-nil-nothing-none-and-unit/"><code>Null</code>, <code>null</code>, <code>Nil</code>, <code>Nothing</code>, <code>None</code> y <code>Unit</code></a> en Scala</p>
</div>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">Demo</span> <span class="o">{</span>
   <span class="k">def</span> <span class="n">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="o">{</span>
      <span class="k">val</span> <span class="n">a</span><span class="k">:</span><span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
      <span class="k">val</span> <span class="n">b</span><span class="k">:</span><span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">None</span>

      <span class="n">println</span><span class="o">(</span><span class="s">&quot;a.isEmpty: &quot;</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="n">isEmpty</span> <span class="o">)</span>  <span class="c1">//false</span>
      <span class="n">println</span><span class="o">(</span><span class="s">&quot;b.isEmpty: &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">isEmpty</span> <span class="o">)</span>  <span class="c1">//true</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="k">object</span> <span class="nc">Demo</span> <span class="o">{</span>
   <span class="k">def</span> <span class="n">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="o">{</span>
      <span class="k">val</span> <span class="n">capitals</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="s">&quot;France&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;Paris&quot;</span><span class="o">,</span> <span class="s">&quot;Japan&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;Tokyo&quot;</span><span class="o">)</span>

      <span class="n">println</span><span class="o">(</span><span class="s">&quot;show(capitals.get( \&quot;Japan\&quot;)) : &quot;</span> <span class="o">+</span> <span class="n">show</span><span class="o">(</span><span class="n">capitals</span><span class="o">.</span><span class="n">get</span><span class="o">(</span> <span class="s">&quot;Japan&quot;</span><span class="o">))</span> <span class="o">)</span>
      <span class="n">println</span><span class="o">(</span><span class="s">&quot;show(capitals.get( \&quot;India\&quot;)) : &quot;</span> <span class="o">+</span> <span class="n">show</span><span class="o">(</span><span class="n">capitals</span><span class="o">.</span><span class="n">get</span><span class="o">(</span> <span class="s">&quot;India&quot;</span><span class="o">))</span> <span class="o">)</span>
   <span class="o">}</span>

   <span class="k">def</span> <span class="n">show</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="k">=</span> <span class="n">x</span> <span class="k">match</span> <span class="o">{</span>
      <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">s</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">s</span>
      <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="s">&quot;?&quot;</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<h4 id="java-8-optional">Java 8 <code>Optional</code><a class="headerlink" href="#java-8-optional" title="Permanent link">&para;</a></h4>
<div class="admonition note">
<p class="admonition-title">Lectura recomendada</p>
<p>Leer <a href="https://www.mkyong.com/java8/java-8-optional-in-depth/">Java 8 Optional in Depth</a>.</p>
</div>
<p><strong>Ejemplo sin <code>Optional</code></strong></p>
<p>Programa de prueba:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MobileTesterWithoutOptional</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ScreenResolution</span> <span class="n">resolution</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ScreenResolution</span><span class="p">(</span><span class="mi">750</span><span class="p">,</span><span class="mi">1334</span><span class="p">);</span>
    <span class="n">DisplayFeatures</span> <span class="n">dfeatures</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DisplayFeatures</span><span class="p">(</span><span class="s">&quot;4.7&quot;</span><span class="p">,</span> <span class="n">resolution</span><span class="p">);</span>
    <span class="n">Mobile</span> <span class="n">mobile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mobile</span><span class="p">(</span><span class="mi">2015001</span><span class="p">,</span> <span class="s">&quot;Apple&quot;</span><span class="p">,</span> <span class="s">&quot;iPhone 6s&quot;</span><span class="p">,</span> <span class="n">dfeatures</span><span class="p">);</span>

    <span class="n">MobileService</span> <span class="n">mService</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MobileService</span><span class="p">();</span>

    <span class="kt">int</span> <span class="n">mobileWidth</span> <span class="o">=</span> <span class="n">mService</span><span class="p">.</span><span class="na">getMobileScreenWidth</span><span class="p">(</span><span class="n">mobile</span><span class="p">);</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Apple iPhone 6s Screen Width = &quot;</span> <span class="o">+</span> <span class="n">mobileWidth</span><span class="p">);</span>

    <span class="n">ScreenResolution</span> <span class="n">resolution2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ScreenResolution</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">DisplayFeatures</span> <span class="n">dfeatures2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DisplayFeatures</span><span class="p">(</span><span class="s">&quot;0&quot;</span><span class="p">,</span> <span class="n">resolution2</span><span class="p">);</span>
    <span class="n">Mobile</span> <span class="n">mobile2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mobile</span><span class="p">(</span><span class="mi">2015001</span><span class="p">,</span> <span class="s">&quot;Apple&quot;</span><span class="p">,</span> <span class="s">&quot;iPhone 6s&quot;</span><span class="p">,</span> <span class="n">dfeatures2</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">mobileWidth2</span> <span class="o">=</span> <span class="n">mService</span><span class="p">.</span><span class="na">getMobileScreenWidth</span><span class="p">(</span><span class="n">mobile2</span><span class="p">);</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Apple iPhone 16s Screen Width = &quot;</span> <span class="o">+</span> <span class="n">mobileWidth2</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Dependencias: <code>MobileService</code> <span><span class="MathJax_Preview">\dashrightarrow</span><script type="math/tex">\dashrightarrow</script></span> <code>DisplayFeatures</code>, <code>ScreenResolution</code></p>
<p>Cantidad de código <em>boilerplate</em> para comprobar los nulos en la clase principal:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MobileService</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getMobileScreenWidth</span><span class="p">(</span><span class="n">Mobile</span> <span class="n">mobile</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">mobile</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">){</span>
      <span class="n">DisplayFeatures</span> <span class="n">dfeatures</span> <span class="o">=</span> <span class="n">mobile</span><span class="p">.</span><span class="na">getDisplayFeatures</span><span class="p">();</span>
      <span class="k">if</span><span class="p">(</span><span class="n">dfeatures</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">){</span>
        <span class="n">ScreenResolution</span> <span class="n">resolution</span> <span class="o">=</span> <span class="n">dfeatures</span><span class="p">.</span><span class="na">getResolution</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">resolution</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">){</span>
          <span class="k">return</span> <span class="n">resolution</span><span class="p">.</span><span class="na">getWidth</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Clases de utilidad:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ScreenResolution</span> <span class="p">{</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">width</span><span class="p">;</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">height</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">ScreenResolution</span><span class="p">(</span><span class="kt">int</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int</span> <span class="n">height</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="na">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">height</span> <span class="o">=</span> <span class="n">height</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getWidth</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">width</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getHeight</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">height</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DisplayFeatures</span> <span class="p">{</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">size</span><span class="p">;</span> <span class="c1">// In inches</span>
  <span class="kd">private</span> <span class="n">ScreenResolution</span> <span class="n">resolution</span><span class="p">;</span>

  <span class="kd">public</span> <span class="nf">DisplayFeatures</span><span class="p">(</span><span class="n">String</span> <span class="n">size</span><span class="p">,</span> <span class="n">ScreenResolution</span> <span class="n">resolution</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">resolution</span> <span class="o">=</span> <span class="n">resolution</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getSize</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">size</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">ScreenResolution</span> <span class="nf">getResolution</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">resolution</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Mobile</span> <span class="p">{</span>
  <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">brand</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">DisplayFeatures</span> <span class="n">displayFeatures</span><span class="p">;</span>
  <span class="c1">// Likewise we can see Memory Features, Camera Features etc.</span>

  <span class="kd">public</span> <span class="nf">Mobile</span><span class="p">(</span><span class="kt">long</span> <span class="n">id</span><span class="p">,</span> <span class="n">String</span> <span class="n">brand</span><span class="p">,</span> <span class="n">String</span> <span class="n">name</span><span class="p">,</span> <span class="n">DisplayFeatures</span> <span class="n">displayFeatures</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">brand</span> <span class="o">=</span> <span class="n">brand</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">displayFeatures</span> <span class="o">=</span> <span class="n">displayFeatures</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getId</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">id</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getBrand</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">brand</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">name</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">DisplayFeatures</span> <span class="nf">getDisplayFeatures</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">displayFeatures</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Ejemplo con <code>Optionals</code></strong></p>
<p>Uso de métodos de <code>Optional</code> en el programa de prueba:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MobileTesterWithOptional</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ScreenResolution</span> <span class="n">resolution</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ScreenResolution</span><span class="p">(</span><span class="mi">750</span><span class="p">,</span><span class="mi">1334</span><span class="p">);</span>
    <span class="n">DisplayFeatures</span> <span class="n">dfeatures</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DisplayFeatures</span><span class="p">(</span><span class="s">&quot;4.7&quot;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">resolution</span><span class="p">));</span>
    <span class="n">Mobile</span> <span class="n">mobile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mobile</span><span class="p">(</span><span class="mi">2015001</span><span class="p">,</span> <span class="s">&quot;Apple&quot;</span><span class="p">,</span> <span class="s">&quot;iPhone 6s&quot;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">dfeatures</span><span class="p">));</span>

    <span class="n">MobileService</span> <span class="n">mService</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MobileService</span><span class="p">();</span>

    <span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="n">mService</span><span class="p">.</span><span class="na">getMobileScreenWidth</span><span class="p">(</span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">mobile</span><span class="p">));</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Apple iPhone 6s Screen Width = &quot;</span> <span class="o">+</span> <span class="n">width</span><span class="p">);</span>

    <span class="n">Mobile</span> <span class="n">mobile2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mobile</span><span class="p">(</span><span class="mi">2015001</span><span class="p">,</span> <span class="s">&quot;Apple&quot;</span><span class="p">,</span> <span class="s">&quot;iPhone 6s&quot;</span><span class="p">,</span> <span class="n">Optional</span><span class="p">.</span><span class="na">empty</span><span class="p">());</span>
    <span class="kt">int</span> <span class="n">width2</span> <span class="o">=</span> <span class="n">mService</span><span class="p">.</span><span class="na">getMobileScreenWidth</span><span class="p">(</span><span class="n">Optional</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">mobile2</span><span class="p">));</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Apple iPhone 16s Screen Width = &quot;</span> <span class="o">+</span> <span class="n">width2</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Menos código <em>boilerplate</em> en la clase principal:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MobileService</span> <span class="p">{</span>
  <span class="kd">public</span> <span class="n">Integer</span> <span class="nf">getMobileScreenWidth</span><span class="p">(</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Mobile</span><span class="o">&gt;</span> <span class="n">mobile</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">mobile</span><span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">Mobile</span><span class="p">::</span><span class="n">getDisplayFeatures</span><span class="p">)</span>
      <span class="p">.</span><span class="na">flatMap</span><span class="p">(</span><span class="n">DisplayFeatures</span><span class="p">::</span><span class="n">getResolution</span><span class="p">)</span>
      <span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">ScreenResolution</span><span class="p">::</span><span class="n">getWidth</span><span class="p">)</span>
      <span class="p">.</span><span class="na">orElse</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Clases de utilidad:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">java.util.Optional</span><span class="p">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DisplayFeatures</span> <span class="p">{</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">size</span><span class="p">;</span> <span class="c1">// In inches</span>
  <span class="kd">private</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">ScreenResolution</span><span class="o">&gt;</span> <span class="n">resolution</span><span class="p">;</span>
  <span class="kd">public</span> <span class="nf">DisplayFeatures</span><span class="p">(</span><span class="n">String</span> <span class="n">size</span><span class="p">,</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">ScreenResolution</span><span class="o">&gt;</span> <span class="n">resolution</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">resolution</span> <span class="o">=</span> <span class="n">resolution</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getSize</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">size</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">ScreenResolution</span><span class="o">&gt;</span> <span class="nf">getResolution</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">resolution</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Mobile</span> <span class="p">{</span>
  <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">brand</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>
  <span class="kd">private</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">DisplayFeatures</span><span class="o">&gt;</span> <span class="n">displayFeatures</span><span class="p">;</span>
  <span class="c1">// Like wise we can see MemoryFeatures, CameraFeatures etc.</span>
  <span class="c1">// For simplicity, using only one Features</span>
  <span class="kd">public</span> <span class="nf">Mobile</span><span class="p">(</span><span class="kt">long</span> <span class="n">id</span><span class="p">,</span> <span class="n">String</span> <span class="n">brand</span><span class="p">,</span> <span class="n">String</span> <span class="n">name</span><span class="p">,</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">DisplayFeatures</span><span class="o">&gt;</span> <span class="n">displayFeatures</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">brand</span> <span class="o">=</span> <span class="n">brand</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">displayFeatures</span> <span class="o">=</span> <span class="n">displayFeatures</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getId</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">id</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getBrand</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">brand</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">name</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">DisplayFeatures</span><span class="o">&gt;</span> <span class="nf">getDisplayFeatures</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">displayFeatures</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="fronteras">Fronteras<a class="headerlink" href="#fronteras" title="Permanent link">&para;</a></h2>
<p>Tensión proveedor-cliente</p>
<ul>
<li>Los proveedores de packages y frameworks quieren amplia aplicabilidad</li>
<li>Los clientes quieren una interfaz centrada en sus necesidades particulares</li>
</ul>
<p><strong>Ejemplo</strong>: La interfaz <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html"><code>java.util.Map</code></a></p>
<div class="highlight"><pre><span></span><code><span class="n">clear</span><span class="p">()</span> <span class="kt">void</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">containsKey</span><span class="p">(</span><span class="n">Object</span> <span class="n">key</span><span class="p">)</span> <span class="kt">boolean</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">containsValue</span><span class="p">(</span><span class="n">Object</span> <span class="n">value</span><span class="p">)</span> <span class="kt">boolean</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">entrySet</span><span class="p">()</span> <span class="n">Set</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">equals</span><span class="p">(</span><span class="n">Object</span> <span class="n">o</span><span class="p">)</span> <span class="kt">boolean</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">get</span><span class="p">(</span><span class="n">Object</span> <span class="n">key</span><span class="p">)</span> <span class="n">Object</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">getClass</span><span class="p">()</span> <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="err">–</span> <span class="n">Object</span>
<span class="nf">hashCode</span><span class="p">()</span> <span class="kt">int</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">isEmpty</span><span class="p">()</span> <span class="kt">boolean</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">keySet</span><span class="p">()</span> <span class="n">Set</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">notify</span><span class="p">()</span> <span class="kt">void</span> <span class="err">–</span> <span class="n">Object</span>
<span class="nf">notifyAll</span><span class="p">()</span> <span class="kt">void</span> <span class="err">–</span> <span class="n">Object</span>
<span class="nf">put</span><span class="p">(</span><span class="n">Object</span> <span class="n">key</span><span class="p">,</span> <span class="n">Object</span> <span class="n">value</span><span class="p">)</span> <span class="n">Object</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">putAll</span><span class="p">(</span><span class="n">Map</span> <span class="n">t</span><span class="p">)</span> <span class="kt">void</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">remove</span><span class="p">(</span><span class="n">Object</span> <span class="n">key</span><span class="p">)</span> <span class="n">Object</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">size</span><span class="p">()</span> <span class="kt">int</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">toString</span><span class="p">()</span> <span class="n">String</span> <span class="err">–</span> <span class="n">Object</span>
<span class="nf">values</span><span class="p">()</span> <span class="n">Collection</span> <span class="err">–</span> <span class="n">Map</span>
<span class="nf">wait</span><span class="p">()</span> <span class="kt">void</span> <span class="err">–</span> <span class="n">Object</span>
<span class="nf">wait</span><span class="p">(</span><span class="kt">long</span> <span class="n">timeout</span><span class="p">)</span> <span class="kt">void</span> <span class="err">–</span> <span class="n">Object</span>
<span class="nf">wait</span><span class="p">(</span><span class="kt">long</span> <span class="n">timeout</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nanos</span><span class="p">)</span> <span class="kt">void</span> <span class="err">–</span> <span class="n">Object</span>
</code></pre></div>
<p>Construimos un <code>Map</code> y lo pasamos.</p>
<ul>
<li>Diseño A: Ninguno de los receptores deberá poder borrar algo del map. ¡Pero hay un <code>clear()</code>!</li>
<li>Diseño B: solo algunos tipos de objetos deben poderse guardar. ¡Los tipos no están restringidos!</li>
</ul>
<p>¿La interfaz <code>Map</code> es siempre satisfactoria? ¿seguro que no va a cambiar?</p>
<ul>
<li>JDK &lt; 5.0:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">Map</span> <span class="n">sensors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="p">();</span>
<span class="p">...</span>
<span class="n">Sensor</span> <span class="n">s</span> <span class="o">=</span> <span class="p">(</span><span class="n">Sensor</span><span class="p">)</span><span class="n">sensors</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">sensorId</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>JDK <span><span class="MathJax_Preview">\geq</span><script type="math/tex">\geq</script></span> 5.0:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">Map</span><span class="o">&lt;</span><span class="n">Sensor</span><span class="o">&gt;</span> <span class="n">sensors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Sensor</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">...</span>
<span class="n">Sensor</span> <span class="n">s</span> <span class="o">=</span> <span class="n">sensors</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">sensorId</span><span class="p">);</span>
</code></pre></div>
<p><strong>Conclusión</strong>: Map<Sensor> ofrece más de lo que necesitamos</p>
<div class="highlight"><pre><span></span><code>  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Sensors</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="n">Map</span> <span class="n">sensors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="p">();</span>
    <span class="kd">public</span> <span class="n">Sensor</span> <span class="nf">getById</span><span class="p">(</span><span class="n">String</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">Sensor</span><span class="p">)</span> <span class="n">sensors</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">//...</span>
  <span class="p">}</span>
</code></pre></div>
<ul>
<li>La interfaz <code>Map</code> queda oculta</li>
<li>Filtramos los métodos que no nos sirven</li>
<li>Más fácil de hacer evolucionar sin impacto en el resto de la aplicación</li>
<li>El casting queda confinado en la clase Sensors, que es más seguro</li>
</ul>
<p><strong>Interfaces de frontera</strong>: No todo uso de <code>Map</code> o interfaz de
frontera debe quedar encapsulado. Sólo es un consejo para no ’pasarla’
con métodos que no vamos a necesitar.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../iiss-oop-4/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Duplicación
              </div>
            </div>
          </a>
        
        
          <a href="../iiss-aop/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                II. Aspectos
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/dodero" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.53cc9318.min.js"></script>
      <script src="../assets/javascripts/bundle.e9c9f54f.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['navigation.sections'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>